---
title: 【git】マージ取り消しの方法を解説
date: 2023-08-22
writtenBy: me
category: tec
tags: [git]
related: []
thumbnail: /images/tec.png
description: Gitユーザー向けに、マージ作業の取り消し方法を詳しく解説。コンフリクト解消からコミット後の後悔まで、4つの手順をわかりやすく紹介。
---

こんにちは、Gitユーザーの皆さん。gitでマージ作業を進めていたけれど、いくつかの理由からやっぱりその作業を取り消したい場合に使える方法を紹介します。

## 1. マージしてコンフリクト発生。取り消したい時

マージ中に予期せぬコンフリクトが発生してしまい、「やっぱりやーめた」ってなったことってありますよね。ただし、コンフリクト解消のための編集がまだ行われていない場合に限ります。

```bash
$ git merge --abort
```

これで、マージ前の状態に戻ることができます。

## 2. マージしてコンフリクト発生。解消編集したけど、結局取り消したい時

コンフリクト解消のためにコードをいろいろ編集してみたけど、結局マージはやめたい場合です。

```bash
$ git reset --hard HEAD
```

このコマンドを使うと、行った編集とマージ作業を一度にキャンセルできます。

## 3. マージ完了して後悔。パート1

マージが完了して（コミットまで行った）けれども、やっぱりマージ前の状態に戻りたい場合です。ここでは、revertコマンドを使って、マージコミットを無かったことにします。

```bash
$ git revert -m 1 <merge_commit>
```

ただし、マージコミットの場合、親が2つに分かれていることを忘れずに。revertコマンドを使う場合は、どちらの親に戻すかを-m 数字で指定します。数字が親を示します。

詳細は[こちらの記事](/tec/git_what_revert)を参照してください。

### ただし、注意が必要です！その3 パート1

この方法を使うと、取り消したマージコミットに含まれていた変更を再度マージすることはできなくなります。例えば、
ブランチAに対してブランチBをマージ
↓
マージコミットをrevertして、ブランチAの状態に戻す
↓
ブランチAに再びブランチBをマージ ← これはできないです（変更が取り込まれない）

revertコマンドを使うと、コミット履歴には「マージした」という記録は残ったまま、実際のコード差分は残りません。

## 4. マージ完了して後悔。パート2

マージが完了して（コミットまで行った）けれども、やっぱりマージ前の状態に戻りたい場合です。こちらはresetコマンドを使用して、コミットの履歴自体を取り消します。

```bash
$ git reset --hard ORIG_HEAD
```

これで、マージする前のHEADの状態に一気に戻ることができます。

ただし、注意が必要です！その方法は一度行ったコミットを取り消すことになります。revertコマンドとは違い、「コミットを取り消した」という履歴は残りません。一度pushなどを行って他の開発者に公開されているコミットを取り消すのは避けましょう。自分のローカルでのみ行った変更を元に戻したい場合にのみ使用しましょう。

以上が、マージの取り消しに関する方法4つの紹介です。必要な場面で使って、スムーズな開発を進めましょう。
